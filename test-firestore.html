<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>TrataSoft Monitoring</title>

<style>
body{font-family:Segoe UI;background:#f4f6f9;margin:0;padding:20px}
h2{margin-bottom:20px}
.cards{display:flex;gap:15px;margin-bottom:20px}
.card{flex:1;background:white;padding:15px;border-radius:8px;text-align:center;box-shadow:0 2px 5px rgba(0,0,0,0.1)}
.live{color:#2a9d8f;font-weight:bold}
.down{color:#e63946;font-weight:bold}
table{width:100%;background:white;border-collapse:collapse;box-shadow:0 2px 5px rgba(0,0,0,0.1)}
th,td{padding:10px;border-bottom:1px solid #ddd;text-align:left}
</style>
</head>
<body>

<h2>Live Monitoring</h2>

<div class="cards">
<div class="card"><h3>Total</h3><p id="total">0</p></div>
<div class="card"><h3>Live</h3><p id="live">0</p></div>
<div class="card"><h3>Down</h3><p id="down">0</p></div>
</div>

<table>
<thead>
<tr>
<th>Company</th>
<th>Website</th>
<th>Network</th>
<th>Status</th>
</tr>
</thead>
<tbody id="table"></tbody>
</table>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

const firebaseConfig = {
  apiKey:"YOUR_KEY",
  authDomain:"YOUR_DOMAIN",
  databaseURL:"YOUR_DB_URL",
  projectId:"YOUR_ID"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const dbRef = ref(db,"websiteData");

onValue(dbRef,(snapshot)=>{
  if(!snapshot.exists()) return;
  const websites = Object.values(snapshot.val());
  render(websites);
});

function render(websites){
  const tbody=document.getElementById("table");
  tbody.innerHTML="";
  let live=0,down=0;

  websites.forEach(site=>{
    const row=document.createElement("tr");

    row.innerHTML=`
      <td>${site.name}</td>
      <td><a href="${site.url}" target="_blank">${site.url}</a></td>
      <td>${site.networkType}</td>
      <td class="${site.status}">${site.status?.toUpperCase()}</td>
    `;

    if(site.status==="live") live++;
    if(site.status==="down") down++;

    tbody.appendChild(row);
  });

  document.getElementById("total").innerText=websites.length;
  document.getElementById("live").innerText=live;
  document.getElementById("down").innerText=down;
}
</script>

</body>
</html>
